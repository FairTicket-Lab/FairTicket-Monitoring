# 부하 테스트 공통 설정 (k6 기반)
# 사용: source data/config.env 또는 . data/config.env

export BASE_URL="${BASE_URL:-http://localhost:8080}"
export SCHEDULE_ID="${SCHEDULE_ID:-1}"
export CONCERT_ID="${CONCERT_ID:-1}"
export GRADE="${GRADE:-VIP}"
export ZONE="${ZONE:-A}"
export NUM_USERS="${NUM_USERS:-1000}"

# ===== TPS별 설정 (서로 꼬이지 않도록 분리) =====
# TPS 100 전용 설정
export TARGET_TPS_100="${TARGET_TPS_100:-100}"
export K6_VUS_100="${K6_VUS_100:-100}"
export K6_DURATION_100="${K6_DURATION_100:-60s}"
export STATUS_POLL_MS_100="${STATUS_POLL_MS_100:-1000}"

# TPS 500 전용 설정
export TARGET_TPS_500="${TARGET_TPS_500:-500}"
export K6_VUS_500="${K6_VUS_500:-500}"
export K6_DURATION_500="${K6_DURATION_500:-60s}"
export STATUS_POLL_MS_500="${STATUS_POLL_MS_500:-1000}"

# TPS 1000 전용 설정
export TARGET_TPS_1000="${TARGET_TPS_1000:-1000}"
export K6_VUS_1000="${K6_VUS_1000:-1000}"
export K6_DURATION_1000="${K6_DURATION_1000:-60s}"
export STATUS_POLL_MS_1000="${STATUS_POLL_MS_1000:-1000}"

# TPS 2000 전용 설정
export TARGET_TPS_2000="${TARGET_TPS_2000:-2000}"
export K6_VUS_2000="${K6_VUS_2000:-2000}"
export K6_DURATION_2000="${K6_DURATION_2000:-60s}"
export STATUS_POLL_MS_2000="${STATUS_POLL_MS_2000:-1000}"

# ===== 공통 설정 =====
# 하트비트 전송 간격(ms). 20000(20초) → heartbeat TTL(30초)보다 짧게 설정하여 안전하게 유지
export HEARTBEAT_INTERVAL_MS="${HEARTBEAT_INTERVAL_MS:-20000}"

